<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Shillong Teer Result</title>
    <style>
        /* --- Google Fonts --- */
        @import url('https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&family=Teko:wght@400;600;700&display=swap');

        /* --- Global Styles --- */
        :root {
            --primary-color: #007BFF;
            --secondary-color: #00C853;
            --background-color: #f0f2f5;
            --text-color: #333;
            --white-color: #fff;
            --card-shadow: 0 4px 8px rgba(0,0,0,0.1);
            --border-radius: 10px;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Roboto', sans-serif;
            background-color: var(--background-color);
            color: var(--text-color);
            line-height: 1.6;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        /* --- Header --- */
        .header {
            background-color: var(--primary-color);
            color: var(--white-color);
            padding: 1rem 0;
            text-align: center;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .header h1 {
            font-family: 'Teko', sans-serif;
            font-size: 2.8rem;
            letter-spacing: 2px;
            text-transform: uppercase;
        }

        /* --- Main Content --- */
        .main-content {
            padding: 2rem 0;
        }

        .result-section {
            background-color: var(--white-color);
            padding: 2rem;
            border-radius: var(--border-radius);
            box-shadow: var(--card-shadow);
            margin-bottom: 2rem;
            text-align: center;
        }

        .result-section h2 {
            font-family: 'Teko', sans-serif;
            font-size: 2.2rem;
            color: var(--primary-color);
            margin-bottom: 1.5rem;
        }

        .result-date {
            font-size: 1.2rem;
            font-weight: 500;
            margin-bottom: 1.5rem;
        }

        .result-boxes {
            display: flex;
            justify-content: center;
            gap: 2rem;
            margin-bottom: 1.5rem;
        }

        .result-box {
            background-color: var(--background-color);
            padding: 1.5rem;
            border-radius: var(--border-radius);
            width: 150px;
            text-align: center;
        }

        .result-box h3 {
            font-family: 'Teko', sans-serif;
            font-size: 1.5rem;
            margin-bottom: 0.5rem;
        }

        .result-number {
            font-size: 2.5rem;
            font-weight: 700;
            color: var(--secondary-color);
        }

        #countdown-timer {
            font-size: 1.3rem;
            font-weight: 500;
            color: var(--primary-color);
        }

        .previous-results {
            background-color: var(--white-color);
            padding: 2rem;
            border-radius: var(--border-radius);
            box-shadow: var(--card-shadow);
        }

        .previous-results h2 {
            text-align: center;
            font-family: 'Teko', sans-serif;
            font-size: 2.2rem;
            color: var(--primary-color);
            margin-bottom: 1.5rem;
        }

        .previous-results table {
            width: 100%;
            border-collapse: collapse;
        }

        .previous-results th, .previous-results td {
            padding: 0.75rem;
            text-align: center;
            border-bottom: 1px solid #ddd;
        }

        .previous-results th {
            background-color: var(--primary-color);
            color: var(--white-color);
            font-family: 'Teko', sans-serif;
            font-size: 1.4rem;
            letter-spacing: 1px;
        }

        .previous-results tbody tr:hover {
            background-color: #f1f1f1;
        }

        /* --- Footer --- */
        .footer {
            background-color: #333;
            color: var(--white-color);
            padding: 3rem 1rem;
            margin-top: 2rem;
        }

        .footer-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 2rem;
        }

        .footer-about, .footer-links, .footer-contact {
            padding: 0 1rem;
        }

        .footer h3 {
            font-family: 'Teko', sans-serif;
            font-size: 1.8rem;
            color: var(--primary-color);
            margin-bottom: 1rem;
        }

        .footer p {
            margin-bottom: 1rem;
        }

        .footer-links ul {
            list-style: none;
        }

        .footer-links ul li a {
            color: var(--white-color);
            text-decoration: none;
            margin-bottom: 0.5rem;
            display: inline-block;
            transition: color 0.3s;
        }

        .footer-links ul li a:hover {
            color: var(--primary-color);
        }

        .footer-contact p {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .social-media {
            margin-top: 1rem;
        }

        .social-media a {
            color: var(--white-color);
            font-size: 1.5rem;
            margin-right: 1rem;
            text-decoration: none;
            transition: color 0.3s;
        }

        .social-media a:hover {
            color: var(--primary-color);
        }

        .footer-bottom {
            text-align: center;
            padding-top: 2rem;
            border-top: 1px solid #555;
            margin-top: 2rem;
        }

        /* --- Responsive Design --- */
        @media (max-width: 768px) {
            .header h1 { font-size: 2.2rem; }
            .result-boxes { flex-direction: column; align-items: center; gap: 1.5rem; }
            .result-box { width: 200px; }
            .footer-container { grid-template-columns: 1fr; text-align: center; }
            .footer-contact p { justify-content: center; }
            .previous-results thead { display: none; }
            .previous-results tr { display: block; margin-bottom: 1rem; border: 1px solid #ddd; border-radius: var(--border-radius); box-shadow: 0 2px 4px rgba(0,0,0,0.05); }
            .previous-results td { display: flex; justify-content: space-between; padding: 0.75rem 1rem; text-align: right; border-bottom: 1px solid #eee; }
            .previous-results td:last-child { border-bottom: none; }
            .previous-results td::before { content: attr(data-label); font-weight: bold; text-align: left; margin-right: 1rem; }
        }
        @media (max-width: 480px) {
            .header h1 { font-size: 1.8rem; letter-spacing: 1px; }
            .result-section h2, .previous-results h2 { font-size: 1.9rem; }
            .result-section, .previous-results { padding: 1rem; }
            .result-date { font-size: 1rem; }
            #countdown-timer { font-size: 1.1rem; }
            .result-box h3 { font-size: 1.3rem; }
            .result-number { font-size: 2.2rem; }
            .footer-bottom p { font-size: 0.9rem; }
        }
    </style>
</head>
<body>

    <header class="header">
        <div class="container">
            <h1>Shillong Teer Result</h1>
        </div>
    </header>

    <main class="main-content">
        <div class="container">
            <section class="result-section">
                <h2>Today's Result</h2>
                <p class="result-date" id="current-date">Loading...</p>
                <div class="result-boxes">
                    <div class="result-box">
                        <h3>First Round (F/R)</h3>
                        <p class="result-number" id="fr-result">--</p>
                    </div>
                    <div class="result-box">
                        <h3>Second Round (S/R)</h3>
                        <p class="result-number" id="sr-result">--</p>
                    </div>
                </div>
                <div id="countdown-timer">Next Result in: 00:00:00</div>
            </section>

            <section class="previous-results">
                <h2>Previous Results</h2>
                <table>
                    <thead>
                        <tr>
                            <th>Date</th>
                            <th>F/R</th>
                            <th>S/R</th>
                        </tr>
                    </thead>
                    <tbody id="previous-results-body">
                        <tr><td colspan="3">Loading previous results...</td></tr>
                    </tbody>
                </table>
            </section>
        </div>
    </main>

    <footer class="footer">
        <div class="container footer-container">
            <div class="footer-about">
                <h3>About Shillong Teer</h3>
                <p>Shillong Teer is a traditional game of archery played in Meghalaya, India. The results are based on the number of arrows that hit the target. This website provides the latest and previous results for the convenience of the players.</p>
            </div>
            <div class="footer-links">
                <h3>Quick Links</h3>
                <ul>
                    <li><a href="#">Home</a></li>
                    <li><a href="#">Previous Results</a></li>
                    <li><a href="#">Common Numbers</a></li>
                    <li><a href="#">Dream Numbers</a></li>
                    <li><a href="#">About Us</a></li>
                    <li><a href="#">Contact Us</a></li>
                </ul>
            </div>
            <div class="footer-contact">
                <h3>Contact Us</h3>
                <p><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-geo-alt-fill" viewBox="0 0 16 16"><path d="M8 16s6-5.686 6-10A6 6 0 0 0 2 6c0 4.314 6 10 6 10zm0-7a3 3 0 1 1 0-6 3 3 0 0 1 0 6z"/></svg> Polo Ground, Shillong, Meghalaya</p>
                <p><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-envelope-fill" viewBox="0 0 16 16"><path d="M.05 3.555A2 2 0 0 1 2 2h12a2 2 0 0 1 1.95 1.555L8 8.414.05 3.555zM0 4.697v7.104l5.803-3.558L0 4.697zM6.761 8.83l-6.57 4.027A2 2 0 0 0 2 14h12a2 2 0 0 0 1.808-1.144l-6.57-4.027L8 9.586l-1.239-.757zm3.436-.586L16 11.801V4.697l-5.803 3.546z"/></svg> contact@shillongteer.com</p>
                <div class="social-media"><a href="#"><i class="bi bi-facebook"></i></a><a href="#"><i class="bi bi-twitter"></i></a><a href="#"><i class="bi bi-instagram"></i></a><a href="#"><i class="bi bi-youtube"></i></a></div>
            </div>
        </div>
        <div class="footer-bottom">
            <p>&copy; <span id="current-year"></span> Shillong Teer. All Rights Reserved. | Designed with ❤️</p>
            <p><strong>Disclaimer:</strong> This website is for informational purposes only. We are not associated with the official Shillong Teer organization.</p>
        </div>
    </footer>

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">

    <script type="module">
        // Import the functions you need from the SDKs you need
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.9.1/firebase-app.js";
        // Import Firestore functions
        import { 
            getFirestore, collection, getDocs, query, orderBy, limit 
        } from "https://www.gstatic.com/firebasejs/11.9.1/firebase-firestore.js";

        // Your web app's Firebase configuration - PASTE YOURS HERE
        const firebaseConfig = {
          apiKey: "AIzaSyBs4oRWbDvxvmxi-ZS4kBJbgiWh9Lpl-lk",
          authDomain: "ommerce-ac13a.firebaseapp.com",
          projectId: "ommerce-ac13a",
          storageBucket: "ommerce-ac13a.appspot.com",
          messagingSenderId: "1068414137141",
          appId: "1:1068414137141:web:ee01f3a9d91f556b5b927c"
        };

        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);
        const resultsCollection = collection(db, 'teer_results');

        // --- All application logic is now inside this module script ---
        document.addEventListener('DOMContentLoaded', () => {

            // --- ELEMENTS ---
            const dateElement = document.getElementById('current-date');
            const frResultElement = document.getElementById('fr-result');
            const srResultElement = document.getElementById('sr-result');
            const previousResultsBody = document.getElementById('previous-results-body');
            
            // --- FUNCTION TO FETCH AND DISPLAY RESULTS FROM FIRESTORE ---
            const fetchAndDisplayResults = async () => {
                // Create a query to get the last 8 results (today + 7 previous)
                const q = query(resultsCollection, orderBy('date', 'desc'), limit(8));
                
                try {
                    const querySnapshot = await getDocs(q);
                    
                    if (querySnapshot.empty) {
                        dateElement.textContent = 'No results found yet.';
                        previousResultsBody.innerHTML = '<tr><td colspan="3">No previous results available.</td></tr>';
                        return;
                    }

                    const results = querySnapshot.docs.map(doc => doc.data());

                    // 1. Populate "Today's Result" (the most recent one)
                    const latestResult = results[0];
                    const resultDate = new Date(latestResult.date + 'T00:00:00'); // Ensure correct date parsing
                    const dateOptions = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
                    dateElement.textContent = resultDate.toLocaleDateString('en-US', dateOptions);
                    frResultElement.textContent = latestResult.fr || '--';
                    srResultElement.textContent = latestResult.sr || '--';

                    // 2. Populate "Previous Results" (the next 7)
                    const previousResults = results.slice(1);
                    previousResultsBody.innerHTML = ''; // Clear loading message

                    if (previousResults.length === 0) {
                        previousResultsBody.innerHTML = '<tr><td colspan="3">No previous results available.</td></tr>';
                    } else {
                        previousResults.forEach(result => {
                            const row = document.createElement('tr');
                            const prevDate = new Date(result.date + 'T00:00:00'); // Ensure correct date parsing
                            const formattedDate = prevDate.toLocaleDateString('en-US', { year: 'numeric', month: 'long', day: 'numeric' });
                            
                            row.innerHTML = `
                                <td data-label="Date">${formattedDate}</td>
                                <td data-label="F/R">${result.fr || '--'}</td>
                                <td data-label="S/R">${result.sr || '--'}</td>
                            `;
                            previousResultsBody.appendChild(row);
                        });
                    }

                } catch (error) {
                    console.error("Error fetching results: ", error);
                    dateElement.textContent = 'Could not load results.';
                    previousResultsBody.innerHTML = '<tr><td colspan="3">Error loading data.</td></tr>';
                }
            };
            
            // --- OTHER DYNAMIC ELEMENTS ---
            const startCountdownTimer = () => {
                const countdownTimerEl = document.getElementById('countdown-timer');
                setInterval(() => {
                    const now = new Date();
                    // Result times for Shillong Teer are typically around 4:00 PM (F/R) and 5:00 PM (S/R) IST
                    const firstRoundTime = new Date(now.getFullYear(), now.getMonth(), now.getDate(), 16, 0, 0); 
                    const secondRoundTime = new Date(now.getFullYear(), now.getMonth(), now.getDate(), 17, 0, 0); 

                    let nextResultTime;
                    if (now < firstRoundTime) {
                        nextResultTime = firstRoundTime;
                    } else if (now < secondRoundTime) {
                        nextResultTime = secondRoundTime;
                    } else {
                        // Next day's first round
                        nextResultTime = new Date(now.getFullYear(), now.getMonth(), now.getDate() + 1, 16, 0, 0);
                    }

                    const diff = nextResultTime - now;
                    const hours = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                    const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
                    const seconds = Math.floor((diff % (1000 * 60)) / 1000);

                    countdownTimerEl.innerHTML = `Next Result in: ${String(hours).padStart(2, '0')}:${String(minutes).padStart(2, '0')}:${String(seconds).padStart(2, '0')}`;
                }, 1000);
            };

            const setFooterYear = () => {
                document.getElementById('current-year').textContent = new Date().getFullYear();
            };

            // --- INITIALIZE THE PAGE ---
            fetchAndDisplayResults();
            startCountdownTimer();
            setFooterYear();
        });
    </script>

</body>
</html>
